language: c
sudo: required
dist: trusty
os:
- osx
- linux
before_install: travis_wait scripts/install-deps.sh
install: 
  - pip install -r ../3rdparty/pydular/requirements.txt
  - pyinstaller --onefile --paths ../3rdparty/pydular/ --windowed --icon=icon/lekture.icns -n Lekture_$1 main.py
script: ls
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: "${SECURE_KEY}"
  file:
  - "src/dist/Lekture_${TRAVIS_TAG}_${TRAVIS_OS_NAME}.zip"
  on:
    tags: true
    all_branches: true
    repo: PixelStereo/lekture
